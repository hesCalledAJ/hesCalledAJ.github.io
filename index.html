<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ali Jafari Portfolio</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>

<body class="bg-[#0a0a0a] text-stone-200 font-sans">
  <div id="root"></div>

  <script type="text/babel">
    const { useEffect, useRef, useState } = React;

    function App() {
      const containerRef = useRef(null);
      const [scrollProgress, setScrollProgress] = useState(0);

      const logoUrl =
        "https://raw.githubusercontent.com/hesCalledAJ/hesCalledAJ/main/logo-rd.png";

      useEffect(() => {
        const handleScroll = () => {
          const scrollY = window.scrollY;
          const progress = Math.min(Math.max(scrollY / 350, 0), 1);
          setScrollProgress(progress);
        };
        window.addEventListener("scroll", handleScroll, { passive: true });
        return () => window.removeEventListener("scroll", handleScroll);
      }, []);

      const scrollTo = (id) => {
        const el = document.getElementById(id);
        if (!el) return;
        const y = el.getBoundingClientRect().top + window.scrollY - 120;
        window.scrollTo({ top: y, behavior: "smooth" });
      };

      const heroHeight = scrollProgress > 0.9 ? "80px" : `${85 - scrollProgress * 65}vh`;

      return (
        <div ref={containerRef} className="min-h-screen bg-[#0a0a0a] text-stone-200">

          {/* Sticky Hero */}
          <div className="sticky top-0 z-50 max-w-6xl mx-auto px-4 pt-6">
            <div
              className="relative overflow-hidden flex items-center justify-center bg-gradient-to-br from-[#242424] via-[#121212] to-[#080808] border border-white/10 shadow-2xl"
              style={{ height: heroHeight, minHeight: "80px", borderRadius: "1.5rem" }}
            >
              {/* Pattern */}
              <PatternBackground logoUrl={logoUrl} scrollProgress={scrollProgress} />

              <div className="absolute inset-0 bg-black/20 pointer-events-none" />

              {/* Expanded state */}
              <div
                className="absolute inset-0 z-10 flex flex-col items-center justify-center text-center px-4"
                style={{
                  opacity: Math.max(1 - scrollProgress * 1.5, 0),
                  pointerEvents: scrollProgress < 0.5 ? "auto" : "none",
                  transform: `translateY(${-scrollProgress * 50}px)`,
                }}
              >
                <div className="w-40 h-40 rounded-full bg-gradient-to-b from-amber-400 to-amber-700 p-1">
                  <img
                    src="https://avatars.githubusercontent.com/u/112819193"
                    className="w-full h-full rounded-full object-cover bg-stone-900 p-1"
                  />
                </div>

                <h1 className="mt-6 text-5xl font-bold bg-gradient-to-b from-stone-50 to-stone-400 bg-clip-text text-transparent">
                  Ali Jafari
                </h1>
                <p className="mt-3 text-lg text-stone-300">Android & Mobile Developer</p>

                <div className="mt-10 flex gap-4">
                  <HeroButton onClick={() => scrollTo("about")}>About</HeroButton>
                  <HeroButton onClick={() => scrollTo("projects")}>Projects</HeroButton>
                  <HeroButton onClick={() => scrollTo("contact")}>Contact</HeroButton>
                </div>
              </div>

              {/* Collapsed navbar */}
              <div
                className="relative z-20 w-full px-6 flex items-center justify-between"
                style={{
                  opacity: Math.max((scrollProgress - 0.7) * 3.3, 0),
                  pointerEvents: scrollProgress > 0.8 ? "auto" : "none",
                }}
              >
                <div className="flex items-center gap-3">
                  <img
                    src="https://avatars.githubusercontent.com/u/112819193"
                    className="w-11 h-11 rounded-full"
                  />
                  <div>
                    <div className="font-bold">Ali Jafari</div>
                    <div className="text-xs text-amber-500">Android Developer</div>
                  </div>
                </div>

                <div className="flex gap-6">
                  <NavLink onClick={() => scrollTo("about")}>About</NavLink>
                  <NavLink onClick={() => scrollTo("projects")}>Projects</NavLink>
                  <NavLink onClick={() => scrollTo("contact")}>Contact</NavLink>
                </div>
              </div>
            </div>
          </div>

          <div style={{ height: 450 }} />

          <main className="max-w-4xl mx-auto px-6 py-24 space-y-32">
            <Section id="about" title="About">
              Solo Android dev. Kotlin. Shipping apps.
            </Section>
            <Section id="projects" title="Projects">
              Projects here.
            </Section>
            <Section id="contact" title="Contact">
              Links here.
            </Section>
          </main>
        </div>
      );
    }

    function HeroButton({ children, onClick }) {
      return (
        <button
          onClick={onClick}
          className="px-6 py-3 rounded-xl bg-white/10 hover:bg-white/20 transition-colors"
        >
          {children}
        </button>
      );
    }

    function NavLink({ children, onClick }) {
      return (
        <button
          onClick={onClick}
          className="text-sm font-semibold text-stone-300 hover:text-white transition-colors bg-transparent border-none cursor-pointer"
        >
          {children}
        </button>
      );
    }

    function Section({ id, title, children }) {
      return (
        <section id={id}>
          <h2 className="text-3xl font-bold mb-6">{title}</h2>
          <div>{children}</div>
        </section>
      );
    }

    function PatternBackground({ logoUrl, scrollProgress }) {
      const scale = Math.max(1 - scrollProgress * 1.1, 0);
      const opacity = Math.max(0.4 - scrollProgress * 0.5, 0);

      return (
        <div
          className="absolute inset-0 pointer-events-none z-0 overflow-hidden"
          style={{
            maskImage: "radial-gradient(circle at 50% 45%, transparent 160px, black 380px)",
            WebkitMaskImage: "radial-gradient(circle at 50% 45%, transparent 160px, black 380px)",
          }}
        >
          <div
            className="absolute top-1/2 left-1/2 flex flex-col justify-around"
            style={{
              width: "2000px",
              height: "2000px",
              transform: `translate(-50%, -50%) scale(${scale})`,
              opacity,
              transformOrigin: "center center",
            }}
          >
            {Array.from({ length: 16 }).map((_, rowIndex) => (
              <div
                key={rowIndex}
                className="flex justify-around w-full"
                style={{ transform: rowIndex % 2 === 1 ? "translateX(60px)" : "none" }}
              >
                {Array.from({ length: 16 }).map((_, colIndex) => (
                  <img
                    key={colIndex}
                    src={logoUrl}
                    alt=""
                    style={{
                      width: "40px",
                      height: "40px",
                      transform: "rotate(-45deg)",
                      filter: "brightness(0) invert(1)",
                    }}
                  />
                ))}
              </div>
            ))}
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>
