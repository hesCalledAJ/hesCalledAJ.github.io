<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ali Jafari Portfolio</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    html {
      scrollbar-gutter: stable;
      overflow-y: scroll;
    }

    @keyframes scrollHintBounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(8px); }
    }

    .hero-box {
      transition:
        height 0.55s cubic-bezier(0.65, 0, 0.35, 1),
        border-radius 0.55s cubic-bezier(0.65, 0, 0.35, 1);
    }
  </style>
</head>

<body class="bg-[#0a0a0a] text-stone-200 font-sans">
  <div id="root"></div>

  <script type="text/babel">
    const { useEffect, useState } = React;

    const COLLAPSE_AT = 80;

    function App() {
      const [collapsed, setCollapsed] = useState(false);
      const logoUrl = "https://raw.githubusercontent.com/hesCalledAJ/hesCalledAJ/main/logo-rd.png";

      useEffect(() => {
        let lastY = window.scrollY;
        let locked = false;

        const aboutTop = () => {
          const el = document.getElementById("about");
          if (!el) return 0;
          return el.getBoundingClientRect().top + window.scrollY - 120;
        };

        const smoothScroll = (top, collapse) => {
          locked = true;
          setCollapsed(collapse);
          window.scrollTo({ top, behavior: "smooth" });
          setTimeout(() => (locked = false), 650);
        };

        const onScroll = () => {
          if (locked) return;

          const y = window.scrollY;
          const delta = y - lastY;

          // ↓ from hero → snap to About + collapse
          if (delta > 12 && y < COLLAPSE_AT + 20) {
            smoothScroll(aboutTop(), true);
          }

          // ↑ near top → snap to 0 + expand
          if (delta < -12 && y < 140) {
            smoothScroll(0, false);
          }

          setCollapsed(y > COLLAPSE_AT);
          lastY = y;
        };

        window.addEventListener("scroll", onScroll, { passive: true });
        return () => window.removeEventListener("scroll", onScroll);
      }, []);

      const scrollTo = (id) => {
        const el = document.getElementById(id);
        if (!el) return;
        setCollapsed(true);
        const top = el.getBoundingClientRect().top + window.scrollY - 120;
        window.scrollTo({ top, behavior: "smooth" });
      };

      return (
        <div className="min-h-screen bg-[#0a0a0a]">

          {/* Sticky Hero */}
          <div className="sticky top-0 z-50 max-w-6xl mx-auto px-4 pt-6">
            <div
              className="hero-box relative overflow-hidden flex items-center justify-center bg-gradient-to-br from-[#242424] via-[#121212] to-[#080808] border border-white/10 shadow-2xl"
              style={{
                height: collapsed ? "80px" : "85vh",
                minHeight: "80px",
                borderRadius: collapsed ? "1.25rem" : "1.5rem",
              }}
            >
              <PatternBackground logoUrl={logoUrl} collapsed={collapsed} />
              <div className="absolute inset-0 bg-black/20 pointer-events-none" />

              {/* Expanded */}
              <div
                className="absolute inset-0 z-10 flex flex-col items-center justify-center text-center px-4"
                style={{
                  opacity: collapsed ? 0 : 1,
                  transform: collapsed ? "translateY(-24px)" : "translateY(0)",
                  transition: "opacity .3s, transform .4s",
                  pointerEvents: collapsed ? "none" : "auto",
                }}
              >
                <div className="w-40 h-40 rounded-full bg-gradient-to-b from-amber-400 to-amber-700 p-1 shadow-2xl">
                  <div className="w-full h-full rounded-full bg-stone-900 p-1">
                    <img
                      src="https://avatars.githubusercontent.com/u/112819193"
                      className="w-full h-full rounded-full object-cover"
                    />
                  </div>
                </div>

                <h1 className="mt-6 text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-b from-stone-50 to-stone-400">
                  Ali Jafari
                </h1>

                <p className="mt-3 text-stone-300">
                  Android & Mobile Developer
                </p>

                <div className="mt-10 flex gap-4">
                  <HeroButton onClick={() => scrollTo("about")}>About</HeroButton>
                  <HeroButton onClick={() => scrollTo("projects")}>Projects</HeroButton>
                  <HeroButton onClick={() => scrollTo("contact")}>Contact</HeroButton>
                </div>

                <div className="mt-14 text-amber-400/60 animate-bounce">↓</div>
              </div>

              {/* Collapsed */}
              <div
                className="relative z-20 w-full h-20 px-6 flex items-center justify-between"
                style={{
                  opacity: collapsed ? 1 : 0,
                  pointerEvents: collapsed ? "auto" : "none",
                  transition: "opacity .25s ease .2s",
                }}
              >
                <div className="flex items-center gap-3">
                  <img
                    src="https://avatars.githubusercontent.com/u/112819193"
                    className="w-11 h-11 rounded-full"
                  />
                  <div>
                    <div className="font-bold">Ali Jafari</div>
                    <div className="text-xs text-amber-500">Android Developer</div>
                  </div>
                </div>

                <div className="flex gap-6">
                  <NavLink onClick={() => scrollTo("about")}>About</NavLink>
                  <NavLink onClick={() => scrollTo("projects")}>Projects</NavLink>
                  <NavLink onClick={() => scrollTo("contact")}>Contact</NavLink>
                </div>
              </div>
            </div>
          </div>

          <div style={{ height: "calc(85vh - 80px + 1.5rem)" }} />

          <main className="max-w-4xl mx-auto px-6 space-y-32 py-24">
            <Section id="about" title="About">
              <p className="text-xl text-stone-300">
                Solo Android dev. Kotlin. Shipping real apps.
              </p>
            </Section>

            <Section id="projects" title="Projects">
              <p>Raise • BRIK</p>
            </Section>

            <Section id="contact" title="Contact">
              <p>Telegram · GitHub · Email</p>
            </Section>
          </main>
        </div>
      );
    }

    const HeroButton = ({ children, onClick }) => (
      <button onClick={onClick} className="px-6 py-3 rounded-xl bg-white/5 border border-white/10">
        {children}
      </button>
    );

    const NavLink = ({ children, onClick }) => (
      <button onClick={onClick} className="text-sm text-stone-300 hover:text-white">
        {children}
      </button>
    );

    const Section = ({ id, title, children }) => (
      <section id={id} className="scroll-mt-32">
        <h2 className="text-4xl mb-6">{title}</h2>
        {children}
      </section>
    );

    function PatternBackground({ logoUrl, collapsed }) {
      return (
        <div
          className="absolute inset-0"
          style={{
            opacity: collapsed ? 0 : 0.35,
            transition: "opacity .4s",
          }}
        >
          {[...Array(14)].map((_, i) => (
            <div key={i} className="flex justify-around">
              {[...Array(14)].map((_, j) => (
                <img key={j} src={logoUrl} className="w-8 h-8 opacity-30 rotate-[-45deg]" />
              ))}
            </div>
          ))}
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
